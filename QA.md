# 学内作品展用 Q&A 完全対策マニュアル (全99問)

このドキュメントは、作品展における想定質問とその回答を「生徒（プレイヤー）」「先生（評価者）」「エンジニア（技術者）」の3つのターゲット別に各33問ずつまとめたものです。

---

## 🐣 生徒・一般観覧者向け (Q1-Q33)
**「楽しそう！」「これどうやるの？」という素朴な疑問や、ゲームプレイに関する質問が中心です。**

**Q1. このゲームは何ていう名前？**
A. 「Cross Stage（クロスステージ）」です！

**Q2. どんなゲーム？**
A. 音楽に合わせて歌詞を「掴んで」遊ぶ、Webブラウザ対応のリズムゲームです。カメラを使って体全部や顔で遊ぶモードもあります。

**Q3. これってスマホでも遊べる？**
A. 遊べます！スマホ専用の「モバイルモード」があって、親指一本で快適に遊べるようになっています。

**Q4. インストールとか必要？**
A. 完全にWebサイトとして動いているので、アプリのインストールは不要です。QRコードを読み込めばすぐ遊べます。

**Q5. パソコンでも遊べる？**
A. もちろんです。PCならマウスを使う「カーソルモード」や、Webカメラを使う「ボディモード」「フェイスモード」が遊べます。

**Q6. 曲は何が入ってるの？**
A. 現在は初音ミクの楽曲（The First Soundなど）を中心に、TextAliveと連携した楽曲で遊べます。

**Q7. このミクちゃんが動いてるのすごいね！どうなってるの？**
A. これは「TextAlive」という技術を使っていて、公式の動画や歌詞データをリアルタイムに借りてきて表示しています。

**Q8. 「フェイスモード」って何？**
A. 顔をカメラに映して、口をパクパクさせて歌詞を食べるようにキャッチする、ちょっと変わったモードです。

**Q9. 「ボディモード」はどうやるの？**
A. パソコンのカメラから離れて全身を映すと、自分の体の動きがゲームに反映されます。全身でリズムに乗ってください！

**Q10. どうすれば高得点が取れるの？**
A. 全ての歌詞バブルを逃さず「長押し（ホールド）」して、コンボをつなげることが重要です。

**Q11. 歌詞の「長押し」ってどういう意味？**
A. タップするだけじゃなくて、歌詞が表示されている間はずっと押し続けて、ゲージを満タンにするのがこのゲームのルールです。

**Q12. ランキングはある？**
A. あります！プレイ後にスコアを登録すると、全プレイヤーの中での順位がわかります。

**Q13. ランキングの名前は本名じゃなきゃダメ？**
A. ニックネームで大丈夫です。好きな名前で登録して、トップを目指してください。

**Q14. 友達と対戦できる？**
A. 直接の対戦はできませんが、ランキング機能でスコアを競い合うことができます。

**Q15. ゲームオーバーはある？**
A. 途中で曲が止まることはありません。最後までプレイしてスコアをリザルト画面で確認できます。

**Q16. 難易度は選べる？**
A. モードによって操作感が全く違うので、自分に合ったスタイルが実質的な難易度選択になります。マウスよりボディモードの方が難しいです！

**Q17. スマホだと画面が小さくて見づらくない？**
A. スマホモードでは、邪魔な表示を消してタップしやすいようにボタン配置を変えているので快適です。

**Q18. 音ゲー苦手なんだけど遊べる？**
A. 判定を甘めに設定しているので、リズムに乗って楽しむだけで十分クリアできます。

**Q19. Webカメラを使うモードは恥ずかしいかも…**
A. 映像は自分の画面に映るだけで、サーバーには一切送信されないので安心してください！

**Q20. なぜ歌詞がバブルになってるの？**
A. 歌詞をただ読むだけでなく、「キャッチする」というアクションを楽しんでもらうためのデザインです。

**Q21. 背景がキラキラしてて綺麗だね！**
A. 「Cross Stage」という名前の通り、ライブステージのネオンをイメージしています。

**Q22. プレイ中に通知が来たらどうなる？**
A. ゲーム自体は止まりませんが、通知でタップが途切れるかもしれないので「おやすみモード」推奨です！

**Q23. 通信量は結構かかる？**
A. 動画をストリーミング読み込みするので、YouTubeを高画質で見るのと同じくらいかかります。Wi-Fi推奨です。

**Q24. 無料で遊べるの？**
A. 完全無料です！広告もありません。

**Q25. 裏技とかないの？**
A. えーっと…キーボードで特定の文字を打つとデバッグ機能が動くかも？（秘密です）

**Q26. これ一人で作ったの？**
A. （個人の場合）はい！（チームの場合）チーム〇〇で作りました！みんなで役割分担しています。

**Q27. 一時停止はできる？**
A. 画面左上のボタンで一時停止・再開ができます。

**Q28. 曲が終わったのにランキングが表示されない！**
A. ネットワークの状況によっては少し時間がかかることがあります。少し待ってみてください。

**Q29. 「調整してください」って出るけどどうすればいい？**
A. ボディモードやフェイスモードでは、カメラにしっかり全体が映らないと認識しません。少し下がってみてください。

**Q30. 文字が流れる演出は何？**
A. ニコニコ動画のように、応援コメントが流れる演出を取り入れています。盛り上がりますよ！

**Q31. 自分の好きな曲で遊べる？**
A. 現状はプリセットされた楽曲のみですが、技術的には追加可能です。

**Q32. 家に帰ってからも遊びたい！**
A. URL（またはQRコード）にアクセスすれば、家でも同じように遊べます。

**Q33. これからのアップデート予定は？**
A. もっと曲を増やしたり、新しい演出を追加したいと考えています！

---

## 🎓 先生・審査員・採用担当向け (Q34-Q66)
**企画意図、技術選定の理由、開発プロセス、完成度など、プロジェクト全体を評価するための質問です。**

**Q34. この作品のコンセプトは何ですか？**
A. 「視覚と聴覚と身体感覚のクロス（交差）」です。単なるリズムゲームではなく、歌詞そのものに触れる没入感を目指しました。

**Q35. 既存のリズムゲームとの差別化ポイントは？**
A. 「テキスト（歌詞）同期」と「Webカメラによる身体検知」をWebブラウザ上で融合させた点です。アプリ不要で誰でも高度な体験が可能です。

**Q36. なぜネイティブアプリではなくWebで開発したのですか？**
A. アクセシビリティを最優先しました。URL一つでPC、スマホ、タブレット全てのユーザーにリーチできるWebの強みを活かしたかったからです。

**Q37. 使用している技術スタックを教えてください。**
A. フロントはReactとVite、バックエンドはCloudflare WorkersとHono、DBにはSupabaseを使用しています。

**Q38. ボディモードの検知精度はどう確保していますか？**
A. GoogleのMediaPipe Poseを使用しています。認識結果の信頼度（Confidence）でフィルタリングし、誤検知を減らす工夫をしています。

**Q39. 開発期間はどれくらいですか？**
A. 構想含めて約〇〇ヶ月です。最初はコアのゲームループから作り始めました。

**Q40. チームでの役割分担はどうなっていますか？**
A. （例）私がゲームロジックとバックエンドを担当し、デザイン周りをメンバーと協力しました。

**Q41. 苦労した点はどこですか？**
A. Webブラウザ上でのパフォーマンスチューニングです。パーティクルや3D演出をリッチにしつつ、60fpsを維持するのにメモリ管理などを工夫しました。

**Q42. 歌詞データの同期ズレ対策はしていますか？**
A. はい。TextAlive APIのタイムスタンプを基準にしつつ、ブラウザの音声遅延を考慮したオフセット調整機能を実装しています。

**Q43. サーバーコストはどうなっていますか？**
A. Cloudflare Workersの無料枠を活用しているため、現時点ではほぼゼロ運用が可能です。スケーラビリティも高い構成です。

**Q44. スマホ対応で気をつけたUIデザインは？**
A. 画面の指隠れ問題です。指でノーツが見えなくならないよう、判定エリアと表示エリアを工夫し、専用の「Mobile Mode」を実装しました。

**Q45. セキュリティ面での配慮はありますか？**
A. スコア送信APIにはCloudflare Turnstile（ボット対策）と、HMAC署名による改ざん防止を入れています。

**Q46. 権利関係（楽曲著作権など）はどうなっていますか？**
A. TextAlive App APIの利用規約に準拠し、ピアプロ等のライセンスに基づいた楽曲利用を行っています。

**Q47. UI/UXの設計思想について教えてください。**
A. 「没入感」をテーマに、ネオン調の配色とグラスモーフィズムを採用しました。プレイを阻害しない視認性の確保にも注力しました。

**Q48. コードの品質管理（設計）で意識したことは？**
A. 「単一責任の原則（SRP）」です。GameManager、InputManager、UIManagerなど、クラスごとに責務を明確に分離し、Reactコンポーネントとの密結合を避けました。

**Q49. プレゼンテーションとしての魅力はどう演出しましたか？**
A. ボディモードなど「見ている人も楽しい」画面作りを意識しました。展示会場で通りがかった人が足を止めるようなデザインにしています。

**Q50. 今後の拡張性は？**
A. 楽曲追加はIDを増やすだけで可能ですし、マルチプレイ機能などもバックエンド基盤があるため実装可能です。

**Q51. ターゲットユーザーは誰ですか？**
A. ボカロ楽曲が好きな若年層と、新しいWeb技術に興味がある層です。

**Q52. テストはどのように行いましたか？**
A. 複数のデバイス（iPhone, Android, PC）での実機テストを繰り返し、特にタッチ感度やカメラ認識の挙動を入念にチェックしました。

**Q53. ユーザーフィードバックからの改善点はありますか？**
A. 当初判定が厳しすぎたため、ヒットエリアを拡大したり、ホールド判定を緩和したりといった調整を行いました。

**Q54. データベースの構成はどうなっていますか？**
A. SupabaseのPostgreSQLを使用し、スコアテーブルとランキングビューを作成しています。RLSで行レベルセキュリティもかけています。

**Q55. これを就職活動のポートフォリオにしますか？**
A. はい、モダンなWeb技術とゲームロジック、バックエンドまでフルスタックで作った強みをアピールしたいです。

**Q56. 自己評価として一番誇れるポイントは？**
A. 異なる技術（音楽同期APIと画像認識AI）を一つのWebアプリとして違和感なく統合できた点です。

**Q57. 逆に、やり残したことはありますか？**
A. 演出面でのパーティクル増量や、ユーザーアカウント機能の実装などは時間が足りずオミットしました。

**Q58. アプリのレスポンス速度への配慮は？**
A. エッジサーバー（Cloudflare）を利用することで、API応答速度を最小限に抑えています。

**Q59. WebGLなどのライブラリは使用しましたか？**
A. はい、Three.jsを使用して背景の3D空間をレンダリングしています。

**Q60. 開発フローにCI/CDは導入しましたか？**
A. GitHubと連携し、Vercel/Cloudflare Pages等への自動デプロイフローを意識して開発しました。

**Q61. ブラウザの互換性問題はありましたか？**
A. Safariでのオーディオ再生ポリシーや、モバイルブラウザのアドレスバーによる画面高さ（100vh問題）への対処が必要でした。

**Q62. プロジェクト管理ツールは何を使いましたか？**
A. GitHub IssuesやProjects、あるいはNotion等を使ってタスク管理を行いました。

**Q63. アクセシビリティへの配慮は？**
A. 色覚多様性に配慮した配色の検討や、キーボードのみでも一部操作できるような設計を試みました。

**Q64. 予期せぬエラーへの対策は？**
A. フォールバック機能を実装しており、APIがダウンしても最低限ゲームが進行するようにしています。

**Q65. 最後に一言アピールをお願いします。**
A. 技術的な挑戦とゲームとしての面白さを両立させました。ぜひ実際にプレイしてその「手触り」を確かめてください！

**Q66. ちなみに、留年は大丈夫ですか？**
A. ……この作品の評価次第です！（笑）

---

## 💻 エンジニア・技術オタク向け (Q67-Q99)
**フレームワークの詳細、アーキテクチャ、セキュリティ実装、パフォーマンスチューニングなど、マニアックな質問集です。**

**Q67. レンダリングサイクルはReactの状態管理とどう切り離した？**
A. ReactのState更新は遅いため、ゲームループは `requestAnimationFrame` で回し、DOM直接操作やCanvas描画で60fpsを担保しています。ReactはUI枠のみ担当です。

**Q68. TextAlive APIとMediaPipeの共存で重くならない？**
A. メインスレッドの負荷を下げるため、MediaPipeの処理間隔を間引いたり、計算負荷の高い処理をWebWorkerに逃がす（検討含む）等の工夫が必要です。

**Q69. Honoを採用した理由は？**
A. Cloudflare Workers環境での起動速度の速さと、TypeScriptとの親和性（型安全性）、そしてミドルウェアの充実度です。Express等より圧倒的に軽量です。

**Q70. スコア送信の改ざん防止（チート対策）の詳細は？**
A. サーバーサイドで署名付きトークンを発行し、スコア送信時にそのトークンと計算結果（ハッシュ）を検証しています。また、TurnstileでBotも弾きます。

**Q71. SupabaseのRLS（Row Level Security）の設定は？**
A. クライアントからの `INSERT` は原則禁止し、署名検証済みのバックエンド（Service Role）経由でのみ書き込みを許可する構成にしています。

**Q72. Idempotency（冪等性）はどう実装した？**
A. クライアントでUUID（attemptId）を生成し、サーバー側でそのIDをDurable ObjectやKVにキャッシュすることで、リプライ攻撃や二重送信を防いでいます。

**Q73. `will-change` プロパティの効果はあった？**
A. バブルやパーティクルの移動において、事前にGPUレイヤーを確保させることで、アニメーションのカクつき（Jank）を大幅に削減できました。

**Q74. オブジェクトプーリングは自前実装？**
A. はい。バブルやエフェクトのDOM/Canvasオブジェクトを生成・破棄せず、配列で再利用するクラスを自作してGC（ガベージコレクション）スパイクを防いでいます。

**Q75. Viewportの「100vh問題」はどう解決した？**
A. `window.innerHeight` を取得してCSS変数（`--vh`）にセットし、リサイズイベントで動的に更新するJS制御を入れています。

**Q76. FaceMeshの座標変換ロジックは？**
A. 検知した座標（正規化された0.0-1.0）を画面ピクセルに変換し、さらに鏡像反転（ミラーリング）処理を加えて、直感的な操作感に補正しています。

**Q77. デプロイパイプラインは？**
A. `npm run build` でViteビルドを行い、`wrangler deploy` でCloudflare Workers Assetsとして静的ファイルとAPIを一括デプロイしています。

**Q78. TypeScriptの型定義は厳密に行っている？**
A. `tsconfig.json` で `strict: true` を有効にし、`any` 型の使用を極力避けています。APIレスポンスもZod等でバリデーションしています。

**Q79. CORS周りでハマった点は？**
A. 開発環境（localhost）と本番環境（カスタムドメイン）でのOrigin制御や、TextAlive APIから取得するメディアリソースのCORSポリシーには注意が必要でした。

**Q80. ゲームループ内の `delta` タイムの扱いは？**
A. フレーム間の経過時間を計測し、移動量やアニメーション進行度を `delta` でスケーリングすることで、フレームレートが落ちてもゲーム速度が変わらないようにしています。

**Q81. `useRef` と `useState` の使い分け基準は？**
A. 描画に直結しない、または高頻度で更新される値（ゲーム内タイマー、現在座標など）は `useRef`（またはクラスメンバ）で持ち、再レンダリングを回避しています。

**Q82. パーティクルシステムの負荷対策は？**
A. 同時表示数をデバイス性能（UserAgent判定）に応じて制限し、画面外に出たパーティクルは即座に非表示/プール戻しを行っています。

**Q83. Safari固有のバグはどう対処した？**
A. `AudiosContext` の自動再生ポリシー（ユーザー操作なしでの再生禁止）に引っかかるため、初回タップ時に無音再生を挟んでUnlockする処理を入れています。

**Q84. 状態遷移（シーン管理）はステートマシン？**
A. 厳密なステートマシンライブラリは使っていませんが、`GameManager` 内で `Title` -> `Playing` -> `Result` のような状態変数を持ち、フローを制御しています。

**Q85. CSSのアニメーションとJSのアニメーションはどう使い分けてる？**
A. 単純な点滅やループ演出はCSS（GPU負荷が低い）、ゲーム判定に関わる正確な移動はJS、と明確に分けています。

**Q86. レート制限（Rate Limiting）の実装方法は？**
A. CloudflareのDurable Objects等を使い、IPアドレスごとに「1分間にx回まで」というカウンターを保持してAPIを保護しています。

**Q87. 依存ライブラリの選定基準は？**
A. バンドルサイズを肥大化させないこと。必要な機能だけをMinimalに導入し、可能な限り自前実装で済ませました。

**Q88. デバッグコマンド `hhrg` の実装は？**
A. キー入力をバッファリングし、特定の文字列パターンと一致した瞬間にコールバックを発火させるリスナーを常駐させています。

**Q89. サーバーレス特有の「コールドスタート」問題は？**
A. Cloudflare WorkersはIsolate技術により起動がミリ秒単位なので、AWS Lambdaのようなコールドスタート遅延はほぼ皆無です。

**Q90. 歌詞データのパース（解析）処理は重くない？**
A. 曲のロード時に一度だけパースして配列にキャッシュするため、プレイ中の負荷はありません。

**Q91. 画面リサイズ時のレイアウト崩れ対策は？**
A. `ResizeObserver` や `window.onresize` を監視し、Canvasサイズや座標計算係数を即座に再計算して追従させています。

**Q92. 外部API（TextAlive）がダウンしたらどうする？**
A. `try-catch` でエラーを捕捉し、ローカルに持っている静的な歌詞データ（JSON）に切り替えてゲームを続行させるフォールバックロジックがあります。

**Q93. 環境変数の管理は？**
A. `.env` ファイルと `wrangler.toml` の `[vars]` セクションで管理し、APIキーなどがコードに含まれないようにしています。

**Q94. 管理画面の認証はどうなってる？**
A. 管理者専用の固定トークン（シークレット）をヘッダーに付与し、サーバー側の環境変数と照合するシンプルな認証です。

**Q95. ログ管理はどうしてる？**
A. 開発中はコンソールログ、本番ではCloudflareのライブログ機能（wrangler tail）でリアルタイムに確認できます。

**Q96. メモリリーク対策で気を使ったところは？**
A. `useEffect` のクリーンアップ関数で、イベントリスナーの解除（`removeEventListener`）や `requestAnimationFrame` のキャンセルを徹底しています。

**Q97. 非同期処理の競合（Race Condition）対策は？**
A. `AbortController` を使用したり、非同期処理完了後にコンポーネントがマウントされているかをチェックするフラグを用いています。

**Q98. コードフォーマッタは何を使ってる？**
A. ESLintとPrettierを導入し、コミット前にコードスタイルを統一しています。

**Q99. このプロジェクトのアーキテクチャを一言で言うと？**
A. 「フロントエンドの没入感を最優先しつつ、バックエンドはエッジで堅牢に守る、モダンWebのベストプラクティス構成」です！
