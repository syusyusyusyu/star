# UI デザインドキュメント

## 概要
本アプリケーションは、リズムゲーム体験（「Cross Stage」）のために設計された、モダンで没入感のあるUIを特徴としています。ダークテーマにネオンカラーのアクセント（主に「ミクグリーン」と「ホットピンク」）を組み合わせ、未来的なステージの雰囲気を演出しています。UIはReactを使用して構築され、カスタムCSS（`src/styles.css`）とTailwind CSSを組み合わせてスタイルが適用されています。

## カラーパレット
CSS変数（`src/styles.css`）で定義されています：
- **プライマリカラー（ミクグリーン）:** `#39C5BB` (`--primary-color`)
- **アクセントカラー（ピンク）:** `#FF69B4` (`--accent-color`)
- **背景ダーク:** `#090A0F` (`--bg-dark`)
- **背景グラデーション開始:** `#1B2735` (`--bg-gradient-start`)
- **テキストカラー:** `#FFFFFF` (`--text-color`)

## レイアウト構造
アプリケーションは主に2つのページで構成されています：

### 1. インデックスページ (`src/pages/IndexPage.tsx`)
- **背景:** ダイナミックなキャンバスエフェクト（ビーム、スポットライト、観客のシルエット）。
- **ヘッダー:** 「Cross Stage」のロゴとサブタイトル。
- **左カラム:** 
  - ナビゲーションボタン（ランキング、遊び方）。
  - モード選択（マウス、モバイル、カメラ、フェイス）と視覚的なインジケーター。
- **右カラム:**
  - 選択された楽曲情報カード。
  - グラデーションとホバーエフェクト付きの大きな「ゲームスタート」ボタン。
- **レスポンシブ:** モバイルデバイスでは縦に積み重なるレイアウトになります。

### 2. ゲームページ (`src/pages/GamePage.tsx`)
- **フルスクリーンコンテナ:** スクロールやズームを防ぐ固定レイアウト（`#game-container`）。
- **背景:** 
  - ライブ映像（カメラモード時）または3D/キャンバスによるビジュアル。
  - パーティクル（`#game-particles`）、グリッドフロア、観客席のオーバーレイレイヤー。
- **HUD要素:**
  - **楽曲情報:** 左上（`#song-info`）にタイトルとアーティストを表示。
  - **スコア/コンボ:** 右上（`#score-container`）に現在のスコアとコンボ数を表示。
  - **キャラクター:** 中央下（`#miku`）に3Dキャラクター（プレースホルダー）を表示。
  - **歌詞:** 
    - フローティングバブル（`.lyric-bubble`）：インタラクティブなゲーム要素。
    - **（モバイルでは非表示）** 下部固定歌詞（`.viewer-lyrics-container`）：カラオケ風のテキスト表示。
  - **コントロール:** 右下（再生/一時停止、最初から）のボタン。
- **オーバーレイ:**
  - **カウントダウン:** ゲーム開始前に中央に大きく表示されるテキスト。
  - **リザルト画面:** （`#results-screen`）最終スコア、ランク、ハイスコア登録フォームを表示する全画面オーバーレイ。
  - **モーダル:** ランキングモーダル（`RankingModal`）と終了確認（`ConfirmModal`）。

## UIコンポーネントとスタイリング

### 歌詞バブル (`.lyric-bubble`)
- **外観:** ネオンのボーダーと影を持つ丸みを帯びたボックス。
- **インタラクション:** ホバーで拡大、「ホールド（長押し）」状態でプログレスリングエフェクトを追加。
- **アニメーション:** ゲームロジックに基づいて上昇またはランダムに浮遊。
- **スタイリング:** 複雑な背景でも読みやすいよう、高コントラストのテキストと影を使用。

### スコアポップアップ (`.score-popup`)
- **用途:** ヒットした場所に一時的に表示。
- **スタイル:** 太字の黄色（`#FFFF00`）テキストと影。
- **アニメーション:** 上昇しながらフェードアウト。**（視認性を高めるため表示時間を延長調整済み）**。
- **注記:** 通常のバブルとは異なり、カード背景や枠線は持ちません。

### リザルト画面 (`#results-screen`)
- **背景:** 放射状グラデーションとぼかし（`backdrop-filter`）を効かせた半透明のダークオーバーレイ。
- **レイアウト:** 装飾的な上部ボーダーを持つ中央配置のカード（`.results-container`）。
- **コンテンツ:**
  - 大きなスコア表示（`#final-score-display`）。
  - ゴールドやテーマカラーのランク（S/A/B/C）。
  - プレイヤー名入力フィールド。
  - アクションボタン（もう一度プレイ、タイトルへ戻る）。

### ボタンとコントロール
- **スタイル:** グラスモーフィズム効果（ぼかし付きの半透明背景）。
- **状態:** ホバー時にグラデーションがスライドしたり、枠線が発光したりするエフェクト。
- **Tailwindの使用:** Reactコンポーネント内でのサイズ調整、パディング、Flexレイアウトに多用されています。

## レスポンシブデザイン
- **モバイルブレークポイント:** `max-width: 768px`。
- **適応:**
  - **フォントサイズ:** `clamp()`関数を使用し、テキスト（タイトル、スコア）を滑らかにスケーリング。
  - **表示切り替え:** 画面スペース確保のため、モバイルでは`.viewer-lyrics-container`を非表示。
  - **レイアウト:** 狭い画面に合わせてリザルト画面のパディングやコンテナ幅を調整。
  - **タッチ:** タッチイベント操作を有効化。ゲームロジックにて特定の「モバイルモード」を利用可能。

## アニメーション
- **CSSキーフレーム:** 
  - `float`, `floatMiku`（浮遊エフェクト）。
  - `explode`（パーティクルの爆発）。
  - `resultsFadeIn`, `slideInLeft`（UI入場アニメーション）。
  - `ripple`（クリック時の波紋フィードバック）。
- **パフォーマンス:** 描画を最適化するため、移動する要素（バブル）に`will-change`プロパティを使用。