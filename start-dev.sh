#!/bin/bash
# жќІуЎ║уњ░тбЃућеУхитІЋсѓ╣сѓ»сЃфсЃЌсЃѕ

echo "­Ъџђ жќІуЎ║уњ░тбЃсѓњУхитІЋсЂЌсЂдсЂёсЂЙсЂЎ..."
echo ""

# DockerсЂїУхитІЋсЂЌсЂдсЂёсѓІсЂІуб║УфЇ
if ! docker info > /dev/null 2>&1; then
    echo "РЮї сѓесЃЕсЃ╝: DockerсЂїУхитІЋсЂЌсЂдсЂёсЂЙсЂЏсѓЊ"
    echo "Docker DesktopсѓњУхитІЋсЂЌсЂдсЂІсѓЅтєЇт║дт«ЪУАїсЂЌсЂдсЂЈсЂасЂЋсЂё"
    exit 1
fi

echo "РюЁ DockerсЂїУхитІЋсЂЌсЂдсЂёсЂЙсЂЎ"
echo ""

# ТЌбтГўсЂ«сѓ│сЃ│сЃєсЃісѓњтЂюТГб
echo "­ЪД╣ ТЌбтГўсЂ«сѓ│сЃ│сЃєсЃісѓњтЂюТГбсЂЌсЂдсЂёсЂЙсЂЎ..."
docker-compose -f docker-compose.dev.yml down

echo ""
echo "­ЪЊд жќІуЎ║уњ░тбЃсѓњсЃЊсЃФсЃЅсЃ╗УхитІЋсЂЌсЂдсЂёсЂЙсЂЎ..."
echo "тѕЮтЏъУхитІЋТЎѓсЂ»ТЋ░тѕєсЂІсЂІсѓІта┤тљѕсЂїсЂѓсѓісЂЙсЂЎ"
echo ""

# жќІуЎ║уњ░тбЃсѓњУхитІЋ
docker-compose -f docker-compose.dev.yml up --build

# сѓ╣сѓ»сЃфсЃЌсЃѕсЂїСИГТќГсЂЋсѓїсЂЪта┤тљѕсЂ«сѓ»сЃфсЃ╝сЃ│сѓбсЃЃсЃЌ
trap 'docker-compose -f docker-compose.dev.yml down' EXIT
